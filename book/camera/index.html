<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <meta name="description" content="Comfy is an ergonomic 2D game engine built in Rust. It's designed to be opinionated, productive, and easy to use.">

  <title>Comfy Engine</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1DRWETLGBR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1DRWETLGBR');
  </script>

  <script>
    const savedTheme = localStorage.getItem('data-bs-theme');
    const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    const theme = savedTheme || preferredTheme;
    document.documentElement.setAttribute('data-bs-theme', theme);

    document.addEventListener('DOMContentLoaded', function () {
      const themeSwitch = document.getElementById('comfySwitch');

      // Set the checkbox state based on the current theme
      themeSwitch.checked = theme === 'dark';

      themeSwitch.addEventListener('change', function () {
        if (themeSwitch.checked) {
          document.documentElement.setAttribute('data-bs-theme', 'dark');
          localStorage.setItem('data-bs-theme', 'dark');
        } else {
          document.documentElement.setAttribute('data-bs-theme', 'light');
          localStorage.setItem('data-bs-theme', 'light');
        }
      });
    });
  </script>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;700&display=swap" />

  <!-- <link -->
  <!--   href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" -->
  <!--   rel="stylesheet" -->
  <!--   integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" -->
  <!--   crossorigin="anonymous" -->
  <!-- /> -->

  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <div class="container mb-4">
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
      <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
        <img src="/comfy.png" alt="logo of the comfy engine" class="bi me-2" width="32" height="32" />
        <span class="fs-4"><strong>Comfy</strong></span>
      </a>

      <ul class="nav nav-pills">
        <li class="nav-item">
          <a href="/book" class="nav-link">Book</a>
        </li>
        <li class="nav-item">
          <a href="/features" class="nav-link">Features</a>
        </li>
        <li class="nav-item"><a href="/examples" class="nav-link">Examples</a></li>
        <li class="nav-item"><a href="/blog" class="nav-link">Blog</a></li>
        <li class="nav-item">
          <a href="https://github.com/darthdeus/comfy" class="">
            <img class="light-github" width="40" height="40" src="/github-mark.svg" alt="Github repo" />
            <img class="dark-github" width="40" height="40" src="/github-mark-white.svg" alt="Github repo" />
          </a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://discord.gg/6NGGGTUz7x" class="">
            <img class="light-discord" height="40" src="/discord-mark-black.png" alt="Discord" />
            <img class="dark-discord" height="40" src="/discord-mark-white.png" alt="Discord" />
          </a>
        </li>

        <li class="ms-3 my-2">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="comfySwitch" style="cursor: pointer">
            <label class="form-check-label" for="comfySwitch">Dark Theme</label>
          </div>
        </li>
      </ul>

    </header>

    <section class="section">
      <div class="container">

<section>
  <div class="row">
    <div class="col-md-3">
      
      
      
    <ul class="nav flex-column">
        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;getting-started&#x2F;">Getting Started</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link disabled" aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;camera&#x2F;">Camera</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;context&#x2F;">Context</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;ecs&#x2F;">ECS</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;other_engines&#x2F;">Why comfy and not X?</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;roadmap&#x2F;">Roadmap</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;releasing&#x2F;">Releasing Your Game</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;contributing&#x2F;">Contributing</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;games_using_comfy&#x2F;">Games Using Comfy</a>
            
        </div>
        
    </li>

        
            
    
    
    
    
    
    

    
        
    

    

    

    <li class="nav-item">
        <div class="tree-menu__label">
            <a class="nav-link " aria-current="page" tree-menu__link" href="&#x2F;book&#x2F;credits&#x2F;">Credits</a>
            
        </div>
        
    </li>

        
    </ul>


    </div>
    <div class="col-md-9">

      <div class="docs-page">
          <div class="docs-content">
              
              
              
              

              

              
              
              
              

              

              <h1>
                  
                      Camera
                  
                  
              </h1>
              <div class="media-content"><p>Almost every game needs a camera. Comfy recognizes this and provides a
reasonable default main camera implementation.</p>
<p><strong>TL;DR: <code>[0, 0]</code> is in the center of the screen, <code>y</code> goes up, world units
independent of pixels, default zoom level is <code>30</code>.</strong></p>
<p>This means that if your game draws a rectangular tile with size <code>1</code>, you should
fit roughly <code>30</code> tiles on the screen horizontally. While this is opinionated,
we found it to be a very useful default across our games.</p>
<p>If you're making a pixel art game with <code>16x16</code> sprites, you would use
<code>draw_sprite</code> and specify size of <code>1</code>. This means your base sprite size is "one
world unit". A small side-benefit is that if your art style changes and you now
have <code>32x32</code> pixel sprites, all of your code still works. A sprite with <code>size = 1</code> will render with the same world size independent of your texture's
dimensions.</p>
<p>This becomes especially useful for games with multiple resolutions, e.g.
non-pixel art games that utilize a lot of asset packs with inconsistent
resolution, where one does not have to worry about resizing things just to try
out new textures/sprites.</p>
<p>The camera is controlled by a <code>MainCamera</code>, and as a pragmatic limitation comfy
has <em>one</em> global main camera which can be accessed via the <code>main_camera()</code>
function (or <code>main_camera_mut()</code>), which can be used to change where the camera
points to, or a zoom level, simply as follows:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let mut</span><span> camera = </span><span style="color:#96b5b4;">main_camera_mut</span><span>();
</span><span>
</span><span>camera.center = </span><span style="color:#96b5b4;">vec2</span><span>(</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span>camera.zoom = </span><span style="color:#d08770;">50.0</span><span>;
</span></code></pre>
<p>Allowing for a multi-camera setup is something that is on comfy's roadmap, but again
it's not something we needed for our own games, and as such it hasn't been a priority.</p>
<p>If you want to move the camera to a new location and then move it back, you can
use <code>.push_center</code> and <code>.pop_center</code> which will store the current values on a
stack and later restore them. Since this uses a stack you can push as many
values you want.</p>
<h2 id="converting-between-world-and-screen-coordinates">Converting between world and screen coordinates<a class="zola-anchor" href="#converting-between-world-and-screen-coordinates" aria-label="Anchor link for: converting-between-world-and-screen-coordinates">🔗</a></h2>
<p>Comfy also provides simple utility functions for converting between world and
screen space, namely <code>world_to_screen</code> and <code>screen_to_world</code>. These functions
are useful for things like mouse picking, or drawing UI elements without <code>egui</code>.</p>
<p>As our camera is global, these functions are also global and can be called simply as</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> mouse_world = </span><span style="color:#96b5b4;">screen_to_world</span><span>(</span><span style="color:#96b5b4;">mouse_position</span><span>());
</span><span style="color:#b48ead;">let</span><span> player_screen = </span><span style="color:#96b5b4;">world_to_screen</span><span>(...);
</span></code></pre>
<p>Note that here we use another global function, <code>mouse_position</code>, which returns
the screen-space mouse position. We also have a helper <code>mouse_world()</code> which
already returns the world-space mouse position as would be converted by the
above code.</p>
<p>To get the current screen size in pixels or world units:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> screen_width_pixels = </span><span style="color:#96b5b4;">screen_width</span><span>(); </span><span style="color:#65737e;">// for example: 1800
</span><span style="color:#b48ead;">let</span><span> screen_height_pixels = </span><span style="color:#96b5b4;">screen_height</span><span>(); </span><span style="color:#65737e;">// for example: 920
</span><span style="color:#b48ead;">let</span><span> visible_world_size = </span><span style="color:#96b5b4;">main_camera</span><span>().</span><span style="color:#96b5b4;">world_viewport</span><span>(); </span><span style="color:#65737e;">// for example: 30.0 x 16.8
</span></code></pre>
</div>
              <div class="docs-footer">
                  <nav class="docs-footer__nav">
                      
                      
                  </nav>
                  <div class="docs-footer__edit-wrapper">
                      <a class="docs-footer__edit" href="https://github.com/darthdeus/comfy-website/edit/master/content/book&#x2F;camera&#x2F;_index.md">
                          <i class="icon icon--pencil"></i>
                          Improve this page
                      </a>
                  </div>
              </div>
          </div>
      </div>

    </div>
  </div>
</section>


</div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>
</body>
</html>
